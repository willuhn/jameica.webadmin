<%@page import="de.willuhn.logging.Logger"%>
<%@page import="de.willuhn.logging.Level"%>
<%@page import="de.willuhn.logging.Message"%>
<%@page import="java.text.DateFormat"%>
<%@page import="java.text.SimpleDateFormat"%>
<%@page import="java.util.Collections"%>
<%@page import="java.lang.reflect.Array"%>
<style>
    /* Log-Levels einfaerben */
    table.data tr.DEBUG td {
      color                    : #46824A;
    }
    table.data tr.INFO td {
      color                    : #46824A;
    }
    table.data tr.WARN td {
      color                    : #5770B2;
    }
    table.data tr.ERROR td {
      color                    : #6E1416;
      background               : #FFAC95;
    }
</style>

<h2>System-Log</h2>
<div style="border: 1px solid #a5a5a5;height:180px;overflow:auto; overflow-y:auto;overflow-x:hidden">
  <table class="data" style="border:none; margin:0px;padding:0px;">
    <tr>
      <th>Datum</th>
      <th>Quelle</th>
      <th>Text</th>
    </tr>
    
    <%
      DateFormat __logDf   = new SimpleDateFormat("dd.MM.yyyy HH:mm:ss");
      Message[] __logLines = Logger.getLastLines();
      for (int i=__logLines.length-1;i>=0;--i)
      {
        String loggingClass = __logLines[i].getLoggingClass();
        loggingClass = loggingClass.substring(loggingClass.lastIndexOf('.')+1);
        %>
		      <tr onmouseover="change_to(this);" onmouseout="change_back(this);" class="<%= __logLines[i].getLevel().getName() %>">
		        <td style="white-space:nowrap;"><pre><%= __logDf.format(__logLines[i].getDate()) %></pre></td>
		        <td><pre><%= loggingClass %></pre></td>
		        <td><pre><%= __logLines[i].getText() %></pre></td>
		      </tr>
        <%
      }
    %>
  </table>
</div>
