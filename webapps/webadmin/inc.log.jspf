<%@ taglib uri="http://java.sun.com/jstl/core_rt" prefix="c" %>
<%@ taglib uri="http://java.sun.com/jsp/jstl/fmt" prefix="fmt" %>
<%@ taglib uri="http://java.sun.com/jsp/jstl/functions" prefix="fn" %>

<style>
    /* Log-Levels einfaerben */
    table.data tr.DEBUG td {
      color                    : #46824A;
    }
    table.data tr.INFO td {
      color                    : #46824A;
    }
    table.data tr.WARN td {
      color                    : #5770B2;
    }
    table.data tr.ERROR td {
      color                    : #6E1416;
      background               : #FFAC95;
    }
</style>

<h2>System-Log</h2>
<div style="border: 1px solid #a5a5a5;height:180px;overflow:auto; overflow-y:auto;overflow-x:hidden">
  <table class="data" style="border:none; margin:0px;padding:0px;">
    <tr>
      <th>Datum</th>
      <th>Quelle</th>
      <th>Text</th>
    </tr>
    <c:forEach items="${system.log}" var="line">
      <c:set var="source" value="${fn:split(line.loggingClass,'.')}" />
      <tr onmouseover="change_to(this);" onmouseout="change_back(this);" class="${line.level.name}">
        <td style="white-space:nowrap;"><pre><fmt:formatDate value="${line.date}" pattern="dd.MM.yyyy HH:mm:ss"/></pre></td>
        <td><pre>${source[fn:length(source)-1]}:${fn:escapeXml(line.loggingMethod)}</pre></td>
        <td><pre>${fn:escapeXml(line.text)}</pre></td>
      </tr>
    </c:forEach>
  </table>
</div>
